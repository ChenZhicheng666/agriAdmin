webpackJsonp([4],{"9D3D":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("mtWM"),i=e.n(r);i.a.defaults.withCredentials=!0;var n={data:function(){return{sels:[],fileList:[],imgList:[],dialogImageUrl:"",logVisible:!1,currentPage:1,pageSize:10,total:80,userList:[],imageUri:"",tableData:[],tableData1:[],tableHeader1:["企业名称","地址","所属行业","主要经营品种"],form:{},rules:{name:[{required:!0,message:"输入不能为空"}],creditCode:[{required:!0,message:"输入不能为空"},{type:"number",message:"输入必须为数字值"}],owner:[{required:!0,message:"输入不能为空"}],validCertificate:[{required:!0,message:"输入不能为空"}]}}},mounted:function(){var t=this;i.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)t.userList.push(a.data.data.list[e])}).catch(function(t){console.log("error")});this.tableData,this.tableData1;i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(a){t.tableData=[],t.total=a.data.data.total;for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData.push(r)}}).catch(function(){console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(a){t.tableData1=[],t.total1=a.data.data.total;for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData1.push(r)}}).catch(function(){console.log("error")})},methods:{selsChange:function(t){this.sels=t},enterprisedelAll:function(){var t=this,a=this.sels.length,e=this.sels;this.$confirm("此操作将永久删除该文件及其子文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var r=0;r<a;r++)i.a.get("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseDel.do?enterpriseId="+e[r].id).then(function(a){i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:t.currentPage,pageSize:t.pageSize}).then(function(a){t.tableData=[],console.log(a.data.data);for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData.push(r)}}).catch(function(){console.log("error")}),t.$message({type:"success",message:"删除成功!"})}).catch(function(a){t.$message({type:"warning",message:"删除失败!需要管理员权限"}),console.log("error")})})},checkAll:function(){var t=this,a=this.sels.length,e=this.sels;this.$confirm("此操作将审核通过这些企业, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e);for(var r=0;r<a;r++)i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseExamine.do",{enterpriseId:e[r].id,status:1}).then(function(a){i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:t.currentPage,pageSize:t.pageSize}).then(function(a){t.tableData=[],console.log(a.data.data);for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData.push(r)}t.$message({type:"success",message:"审核通过!"})}).catch(function(){console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:t.currentPage,pageSize:t.pageSize}).then(function(a){t.tableData1=[];for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData1.push(r)}}).catch(function(){console.log("error")})}).catch(function(){console.log("error")})})},deleteAlert:function(t,a){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.a.defaults.withCredentials=!0,i.a.get("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseDel.do?enterpriseId="+a[t].id).then(function(t){console.log(t.data),e.$message({type:"success",message:"删除成功！"})}).catch(function(t){console.log("error")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},test:function(){},show:function(t,a){var e=this,r=new FormData;r.append("file",t.raw),i.a.post("http://120.79.185.173:8080/agriculture/portal/user/upload.do",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.imageUri=t.data.data.uri}).catch(function(t){console.log("error")})},handleRemove:function(t,a){},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleSizeChange:function(t){var a=this;this.pageSize=t,i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(t){a.tableData=[],a.total=t.data.data.total;for(var e=0;e<t.data.data.list.length;e++){var r={"企业名称":t.data.data.list[e].name,"所属行业":t.data.data.list[e].industry,"主要经营品种":t.data.data.list[e].mainProduct,"地址":t.data.data.list[e].address,id:t.data.data.list[e].id};a.tableData.push(r)}}).catch(function(){console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(t){a.tableData1=[],a.total1=t.data.data.total;for(var e=0;e<t.data.data.list.length;e++){var r={"企业名称":t.data.data.list[e].name,"所属行业":t.data.data.list[e].industry,"主要经营品种":t.data.data.list[e].mainProduct,"地址":t.data.data.list[e].address,id:t.data.data.list[e].id};a.tableData1.push(r)}}).catch(function(){console.log("error")})},handleCurrentChange:function(t){var a=this;this.currentPage=t,i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(t){a.tableData=[],a.total=t.data.data.total;for(var e=0;e<t.data.data.list.length;e++){var r={"企业名称":t.data.data.list[e].name,"所属行业":t.data.data.list[e].industry,"主要经营品种":t.data.data.list[e].mainProduct,"地址":t.data.data.list[e].address,id:t.data.data.list[e].id};a.tableData.push(r)}}).catch(function(){console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(t){a.tableData1=[],a.total1=t.data.data.total;for(var e=0;e<t.data.data.list.length;e++){var r={"企业名称":t.data.data.list[e].name,"所属行业":t.data.data.list[e].industry,"主要经营品种":t.data.data.list[e].mainProduct,"地址":t.data.data.list[e].address,id:t.data.data.list[e].id};a.tableData1.push(r)}}).catch(function(){console.log("error")})},initCompany:function(){for(var t=this,a=0;a<this.userList.length;a++)if(this.userList[a].username===this.form.owner){var e=this.userList[a].userId;break}var r={name:this.form.name,creditCode:this.form.creditCode,address:this.form.address,industry:this.form.industry,mainProduct:this.form.mainProduct,userId:e,image:this.imageUri};this.$confirm("确定创建该组织?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.defaults.withCredentials=!0,i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseAdd.do",r).then(function(a){0===a.data.status?t.$message({type:"success",message:"企业创建成功!"}):t.$message({type:"warning",message:"加入企业失败!需要管理员权限"})}).catch(function(a){console.log("error"),t.$message({type:"warning",message:"加入企业失败!需要管理员权限"})})}).catch(function(){t.$message({type:"error",message:"创建失败, 带*输入框不能为空!"}),console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:this.currentPage,pageSize:this.pageSize}).then(function(a){t.tableData1=[];for(var e=0;e<a.data.data.list.length;e++){var r={"企业名称":a.data.data.list[e].name,"所属行业":a.data.data.list[e].industry,"主要经营品种":a.data.data.list[e].mainProduct,"地址":a.data.data.list[e].address,id:a.data.data.list[e].id};t.tableData1.push(r)}}).catch(function(){console.log("error")})},check:function(t,a){var e=this;this.$confirm("确定通过审核?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseExamine.do",{enterpriseId:a[t].id,status:1}).then(function(t){i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:1,pageNum:e.currentPage,pageSize:e.pageSize}).then(function(t){e.tableData=[],console.log(t.data.data);for(var a=0;a<t.data.data.list.length;a++){var r={"企业名称":t.data.data.list[a].name,"所属行业":t.data.data.list[a].industry,"主要经营品种":t.data.data.list[a].mainProduct,"地址":t.data.data.list[a].address,id:t.data.data.list[a].id};e.tableData.push(r)}}).catch(function(){console.log("error")}),i.a.post("http://120.79.185.173:8080/agriculture/backend/enterprise/enterpriseGet.do",{status:0,pageNum:e.currentPage,pageSize:e.pageSize}).then(function(t){e.tableData1=[];for(var a=0;a<t.data.data.list.length;a++){var r={"企业名称":t.data.data.list[a].name,"所属行业":t.data.data.list[a].industry,"主要经营品种":t.data.data.list[a].mainProduct,"地址":t.data.data.list[a].address,id:t.data.data.list[a].id};e.tableData1.push(r)}}).catch(function(){console.log("error")})}).catch(function(){console.log("error")}),e.$message({type:"success",message:"审核通过!"}),a.splice(t,1)}).catch(function(){e.$message({type:"info",message:"已取消审核"})})}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-tabs",{attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"组织信息"}},[e("el-row",[e("el-button",{attrs:{type:"danger"},on:{click:t.enterprisedelAll}},[t._v("批量删除")])],1),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData,"header-cell-style":{background:"#1ca291",color:"#ffffff"},border:"","highlight-current-row":""},on:{"selection-change":t.selsChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{type:"index",label:"#",width:"55"}}),t._v(" "),t._l(t.tableHeader1,function(t){return e("el-table-column",{key:t.id,attrs:{prop:t,label:t}})}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteAlert(a.$index,t.tableData)}}},[t._v("移除")])]}}])})],2),t._v(" "),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[5,10,50,100,200],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"组织开设"}},[e("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"150px"}},[e("el-form-item",{attrs:{label:"组织名称",prop:"name"}},[e("el-input",{staticStyle:{width:"500px"},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",t._n(a))},expression:"form.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditCode"}},[e("el-input",{staticStyle:{width:"500px"},model:{value:t.form.creditCode,callback:function(a){t.$set(t.form,"creditCode",t._n(a))},expression:"form.creditCode"}})],1),t._v(" "),e("el-form-item",{attrs:{prop:"address",label:"地址"}},[e("el-input",{staticStyle:{width:"500px"},model:{value:t.form.address,callback:function(a){t.$set(t.form,"address",t._n(a))},expression:"form.address"}})],1),t._v(" "),e("el-form-item",{attrs:{prop:"industry",label:"所属行业"}},[e("el-input",{staticStyle:{width:"500px"},model:{value:t.form.industry,callback:function(a){t.$set(t.form,"industry",t._n(a))},expression:"form.industry"}})],1),t._v(" "),e("el-form-item",{attrs:{prop:"mainProduct",label:"主要经营品种"}},[e("el-input",{staticStyle:{width:"500px"},model:{value:t.form.mainProduct,callback:function(a){t.$set(t.form,"mainProduct",t._n(a))},expression:"form.mainProduct"}})],1),t._v(" "),e("el-form-item",{attrs:{prop:"owner",label:"企业负责人"}},[e("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择标签"},model:{value:t.form.owner,callback:function(a){t.$set(t.form,"owner",a)},expression:"form.owner"}},t._l(t.userList,function(t){return e("el-option",{key:t.userId,attrs:{label:t.username,value:t.username}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{prop:"validCertificate",label:"企业有效证件"}},[e("el-upload",{attrs:{action:"","list-type":"picture-card","file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"auto-upload":!1,"on-remove":t.handleRemove,"on-change":t.show,limit:1}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("el-dialog",{attrs:{visible:t.logVisible},on:{"update:visible":function(a){t.logVisible=a}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),e("el-form-item",[e("el-button",{on:{click:t.initCompany}},[t._v("立即创建")]),t._v(" "),e("el-button",[t._v("取消")])],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"组织审核"}},[e("div",[e("el-row",[e("el-button",{on:{click:t.checkAll}},[t._v("批量审核")])],1),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData1,"header-cell-style":{background:"#1ca291",color:"#ffffff"},border:"","highlight-current-row":""},on:{"selection-change":t.selsChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{type:"index",label:"#",width:"55"}}),t._v(" "),t._l(t.tableHeader1,function(t){return e("el-table-column",{key:t.id,attrs:{prop:t,label:t}})}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.check(a.$index,t.tableData1)}}},[t._v("\n                审核\n              ")])]}}])})],2)],1)])],1)},staticRenderFns:[]};var l=e("VU/8")(n,s,!1,function(t){e("sCNI")},null,null);a.default=l.exports},sCNI:function(t,a){}});
//# sourceMappingURL=4.d472c8bf8ac6127f35a0.js.map