webpackJsonp([9],{uxfR:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("lbHh"),i=e.n(s),o=e("mtWM"),l=e.n(o),r=e("iiAv");e("uXZL"),e("VI/i");l.a.defaults.withCredentials=!0;var n={data:function(){return{sels:[],multipleSelection:[],dialogVisible:!1,dialogVisible1:!1,form:{},form1:{},companyList:[],positionList:[{positionId:0,label:"员工"},{positionId:1,label:"经理"},{positionId:2,label:"负责人"}],typeList:[{type:0,label:"管理部门"},{type:1,label:"消费者"},{type:2,label:"农户"},{type:3,label:"企业"},{type:4,label:"科研机构"},{type:5,label:"行业协会"},{type:6,label:"其他产业链"}],tableData:[],tableHeader:["姓名","手机","企业","角色"],idCard:""}},mounted:function(){var t=this;this.tableData;if("1"===i.a.get("limit")){this.tableData=[],l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++)if(Object(r.a)(a.data.data.list[e].relationships[s].enterpriseName)){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};console.log(i),t.tableData.push(i)}}).catch(function(){console.log("error")})}else{this.tableData;l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};t.tableData.push(i)}}).catch(function(){console.log("error")})}},methods:{selsChange:function(t){this.sels=t},openSel:function(){this.dialogVisible1=!0},setAll:function(){var t=this;console.log(666),console.log(this.sels);var a=this.sels.length,e=this.sels;console.log(this.form1);for(var s=0;s<a;s++)console.log(e[s].userId),"员工"===this.form1.resource?l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:e[s].userId,position:0}).then(function(t){}).catch(function(t){console.log("error")}):"经理"===this.form1.resource?l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:e[s].userId,position:1}).then(function(t){}).catch(function(t){console.log("error")}):"负责人"===this.form1.resource&&l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:e[s].userId,position:2}).then(function(t){}).catch(function(t){console.log("error")}),this.dialogVisible1=!1;if("1"===i.a.get("limit")){this.tableData=[],l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++)if(Object(r.a)(a.data.data.list[e].relationships[s].enterpriseName)){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};console.log(i),t.tableData.push(i)}}).catch(function(){console.log("error")})}else{this.tableData;l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};t.tableData.push(i)}}).catch(function(){console.log("error")})}},deleteAlert:function(t,a){var e=this;this.$confirm("此操作将永久删除该帐户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){l.a.defaults.withCredentials=!0,l.a.get("http://120.79.185.173:8080/agriculture/backend/user/userDel.do",{userId:a[t].userId}).then(function(t){if(0===t.data.status)if(e.$message({type:"success",message:"删除成功!"}),"1"===i.a.get("limit")){e.tableData=[],l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(t){for(var a=0;a<t.data.data.list.length;a++)if(t.data.data.list[a].relationships.length>0)for(var s=0;s<t.data.data.list[a].relationships.length;s++)if(Object(r.a)(t.data.data.list[a].relationships[s].enterpriseName)){var i={"姓名":t.data.data.list[a].username,"手机":t.data.data.list[a].phonenum,"企业":t.data.data.list[a].relationships[s].enterpriseName,"角色":t.data.data.list[a].relationships[s].position,userId:t.data.data.list[a].userId};console.log(i),e.tableData.push(i)}}).catch(function(){console.log("error")})}else{e.tableData;l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(t){for(var a=0;a<t.data.data.list.length;a++)if(t.data.data.list[a].relationships.length>0)for(var s=0;s<t.data.data.list[a].relationships.length;s++){var i={"姓名":t.data.data.list[a].username,"手机":t.data.data.list[a].phonenum,"企业":t.data.data.list[a].relationships[s].enterpriseName,"角色":t.data.data.list[a].relationships[s].position,userId:t.data.data.list[a].userId};e.tableData.push(i)}}).catch(function(){console.log("error")})}else e.$message({type:"warning",message:"删除失败!需要管理员权限"})}).catch(function(t){e.$message({type:"warning",message:"删除失败!需要管理员权限"}),console.log("error")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},openForm:function(t,a){this.dialogVisible=!0,this.idCard="",this.idCard=a[t].userId},setPosition:function(){var t=this;if("员工"===this.form.resource?l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:this.idCard,position:0}).then(function(t){}).catch(function(t){console.log("error")}):"经理"===this.form.resource?l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:this.idCard,position:1}).then(function(t){}).catch(function(t){console.log("error")}):"负责人"===this.form.resource&&l.a.post("http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do",{id:this.idCard,position:2}).then(function(a){console.log(t.form.resource),console.log(t.idCard)}).catch(function(t){console.log("error")}),"1"===i.a.get("limit")){this.tableData=[],l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++)if(Object(r.a)(a.data.data.list[e].relationships[s].enterpriseName)){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};console.log(i),t.tableData.push(i)}}).catch(function(){console.log("error")})}else{this.tableData;l.a.post("http://120.79.185.173:8080/agriculture/backend/user/usersGet.do",{pageNum:10}).then(function(a){for(var e=0;e<a.data.data.list.length;e++)if(a.data.data.list[e].relationships.length>0)for(var s=0;s<a.data.data.list[e].relationships.length;s++){var i={"姓名":a.data.data.list[e].username,"手机":a.data.data.list[e].phonenum,"企业":a.data.data.list[e].relationships[s].enterpriseName,"角色":a.data.data.list[e].relationships[s].position,userId:a.data.data.list[e].userId};t.tableData.push(i)}}).catch(function(){console.log("error")})}this.dialogVisible=!1}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-row",[e("el-button",{on:{click:t.openSel}},[t._v("批量分配")])],1),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData,"header-cell-style":{background:"#1ca291",color:"#ffffff"},border:"","highlight-current-row":""},on:{"selection-change":t.selsChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),t._l(t.tableHeader,function(t){return e("el-table-column",{key:t.id,attrs:{prop:t,label:t}})}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteAlert(a.$index,t.tableData)}}},[t._v("\n          移除\n        ")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.openForm(a.$index,t.tableData)}}},[t._v("分配角色")])]}}])})],2),t._v(" "),e("el-dialog",{attrs:{title:"分配角色",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:""}},[e("el-radio-group",{model:{value:t.form.resource,callback:function(a){t.$set(t.form,"resource",a)},expression:"form.resource"}},[e("el-radio",{attrs:{label:"员工",prop:"0"}}),t._v(" "),e("el-radio",{attrs:{label:"经理"}}),t._v(" "),e("el-radio",{attrs:{label:"负责人"}})],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.setPosition}},[t._v("确 定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"分配角色",visible:t.dialogVisible1,width:"30%"},on:{"update:visible":function(a){t.dialogVisible1=a}}},[e("el-form",{ref:"form1",attrs:{model:t.form1,"label-width":"80px"}},[e("el-form-item",{attrs:{label:""}},[e("el-radio-group",{model:{value:t.form1.resource,callback:function(a){t.$set(t.form1,"resource",a)},expression:"form1.resource"}},[e("el-radio",{attrs:{label:"员工",prop:"0"}}),t._v(" "),e("el-radio",{attrs:{label:"经理"}}),t._v(" "),e("el-radio",{attrs:{label:"负责人"}})],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible1=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.setAll}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},u=e("VU/8")(n,d,!1,null,null,null);a.default=u.exports}});
//# sourceMappingURL=9.b134ecd8b17c6d5f7b35.js.map