{"version":3,"sources":["webpack:///src/views/person/roleManage.vue","webpack:///./src/views/person/roleManage.vue?545e","webpack:///./src/views/person/roleManage.vue"],"names":["axios_default","a","defaults","withCredentials","roleManage","data","sels","multipleSelection","dialogVisible","dialogVisible1","form","form1","companyList","positionList","positionId","label","typeList","type","tableData","tableHeader","idCard","mounted","_this","this","post","pageNum","then","res","console","log","i","list","length","relationships","j","newValue","username","userId","姓名","手机","phonenum","企业","enterpriseName","角色","position","push","catch","error","methods","selsChange","openSel","setAll","_this2","Sel","resource","id","deleteAlert","index","rows","_this3","$confirm","confirmButtonText","cancelButtonText","center","get","status","$message","message","openForm","setPosition","_this4","person_roleManage","render","_vm","_h","$createElement","_c","_self","on","click","_v","ref","staticStyle","width","margin-top","attrs","header-cell-style","background","color","border","highlight-current-row","selection-change","_l","item","key","prop","fixed","scopedSlots","_u","fn","scope","size","nativeOn","$event","preventDefault","$index","title","visible","update:visible","model","label-width","value","callback","$$v","$set","expression","staticClass","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/9.2285a7b243cb46db85ef.js","sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-button @click=\"openSel\" >批量分配</el-button>\n    </el-row>\n    <el-table :data=\"tableData\"\n              :header-cell-style=\"{background:'#1ca291',color:'#ffffff'}\"\n              border highlight-current-row style=\"width: 100%;margin-top:20px;\"\n              ref=\"multipleTable\" @selection-change=\"selsChange\"\n    >\n      <!--    <el-table-column-->\n      <!--      width=\"55\"-->\n      <!--      fixed=\"left\">-->\n      <!--      <template slot-scope=\"scope\">-->\n      <!--        <el-checkbox v-model=\"checked\">备选项</el-checkbox>-->\n      <!--      </template>-->\n      <!--    </el-table-column>-->\n      <el-table-column  type=\"selection\" width=\"55\"></el-table-column>\n\n      <el-table-column v-for='item of tableHeader' :prop=\"item\" :label=\"item\" :key='item.id'>\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button\n            @click.native.prevent=\"deleteAlert(scope.$index, tableData)\"\n            type=\"danger\"\n            size=\"small\">\n            移除\n          </el-button>\n          <el-button size=\"small\" @click=\"openForm(scope.$index, tableData)\">分配角色</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"分配角色\" :visible.sync=\"dialogVisible\" width=\"30%\">\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"\">\n          <el-radio-group v-model=\"form.resource\">\n            <el-radio label=\"员工\" prop=\"0\"></el-radio>\n            <el-radio label=\"经理\"></el-radio>\n            <el-radio label=\"负责人\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"setPosition\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <el-dialog title=\"分配角色\" :visible.sync=\"dialogVisible1\" width=\"30%\">\n      <el-form ref=\"form1\" :model=\"form1\" label-width=\"80px\">\n        <el-form-item label=\"\">\n          <el-radio-group v-model=\"form1.resource\">\n            <el-radio label=\"员工\" prop=\"0\"></el-radio>\n            <el-radio label=\"经理\"></el-radio>\n            <el-radio label=\"负责人\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible1 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"setAll\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Cookies from 'js-cookie'\n  import axios from 'axios';\n  axios.defaults.withCredentials = true\n  import XLSX from 'xlsx'\n  import crypto from 'crypto'\n  export default {\n    data() {\n      return {\n        sels: [],//选中显示的值\n        multipleSelection: [],\n        dialogVisible: false,\n        dialogVisible1: false,\n        form: {},\n        form1: {},\n        companyList:[],\n        positionList:[{positionId:0,label:'员工'},{positionId:1,label:'经理'},{positionId:2,label:'负责人'}],\n        typeList:[\n          {type:0,label:'管理部门'},\n          {type:1,label:'消费者'},\n          {type:2,label:'农户'},\n          {type:3,label:'企业'},\n          {type:4,label:'科研机构'},\n          {type:5,label:'行业协会'},\n          {type:6,label:'其他产业链'}\n        ],\n        tableData: [],\n        tableHeader:['姓名', '手机', '企业', '角色'],\n        idCard:'',\n      }\n    },\n    mounted:function(){\n      var Table=this.tableData;\n\n      axios.post('http://120.79.185.173:8080/agriculture/backend/user/usersGet.do',{pageNum:10})\n        .then((res) => {\n          this.tableData=[]\n          console.log(res.data);\n          for(var i=0;i<res.data.data.list.length;i++) {\n            if (res.data.data.list[i].relationships.length > 0) {\n              for (var j = 0; j < res.data.data.list[i].relationships.length; j++) {\n                var newValue = {\n                  username: res.data.data.list[i].username,\n                  userId: res.data.data.list[i].userId,\n                  type: res.data.data.list[i].type,\n                  姓名: res.data.data.list[i].username,\n                  手机: res.data.data.list[i].phonenum,\n                  企业: res.data.data.list[i].relationships[j].enterpriseName,\n                  角色: res.data.data.list[i].relationships[j].position\n                }\n                this.tableData.push(newValue)\n              }\n            }\n          }\n        })\n        .catch((error) =>{\n          console.log(\"error\");\n        })\n    },\n    methods:{\n      selsChange(sels) {\n        //被选中的行组成数组\n        this.sels = sels;\n      },\n      openSel(){\n        this.dialogVisible1 = true;\n      },\n      setAll() {\n        console.log(666)\n        console.log(this.sels)\n        const length = this.sels.length;\n        var Sel=this.sels;\n\n        console.log(this.form1)\n        for (let i = 0; i < length; i++) {\n          console.log(Sel[i].userId)\n          if(this.form1.resource==='员工'){\n            // console.log(0)\n            // console.log(this.idCard);\n            axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:Sel[i].userId,position:0}).then(res => {\n              // console.log(res.data);\n            }).catch((error)=>{\n              console.log(\"error\");\n            });\n          }\n          else if(this.form1.resource==='经理'){\n            axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:Sel[i].userId,position:1}).then(res => {\n              // console.log(res.data);\n            }).catch((error)=>{\n              console.log(\"error\");\n            });\n          }\n          else if(this.form1.resource==='负责人'){\n            axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:Sel[i].userId,position:2}).then(res => {\n              // console.log(res.data);\n            }).catch((error)=>{\n              console.log(\"error\");\n            });\n          }\n\n          //刷新列表\n          axios.post('http://120.79.185.173:8080/agriculture/backend/user/usersGet.do',{pageNum:10})\n            .then((res) => {\n              this.tableData=[]\n              // console.log(res.data);\n              for(var i=0;i<res.data.data.list.length;i++) {\n                if (res.data.data.list[i].relationships.length > 0) {\n                  for (var j = 0; j < res.data.data.list[i].relationships.length; j++) {\n                    var newValue = {\n                      username: res.data.data.list[i].username,\n                      userId: res.data.data.list[i].userId,\n                      type: res.data.data.list[i].type,\n                      姓名: res.data.data.list[i].username,\n                      手机: res.data.data.list[i].phonenum,\n                      企业: res.data.data.list[i].relationships[j].enterpriseName,\n                      角色: res.data.data.list[i].relationships[j].position\n                    }\n                    this.tableData.push(newValue)\n                  }\n                }\n              }\n            })\n            .catch((error) =>{\n              console.log(\"error\");\n            })\n          //关闭窗口\n          this.dialogVisible1 = false\n        }\n      },\n      deleteAlert(index,rows){\n        this.$confirm('此操作将永久删除该帐户, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n          center: true\n        }).then(()=>{\n          // console.log(index);\n          // console.log(rows[index].userId)\n          // backend/user/userDel.do\n          axios.defaults.withCredentials = true;\n          axios.get('http://120.79.185.173:8080/agriculture/backend/user/userDel.do',{userId:rows[index].userId})\n            .then((res) => {\n              // console.log(res.data);\n              if(res.data.status===0){\n                this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                });\n              }\n              else{\n                this.$message({\n                  type: 'warning',\n                  message: '删除失败!需要管理员权限'\n                });\n              }\n            })\n            .catch((error) =>{\n              this.$message({\n                type: 'warning',\n                message: '删除失败!需要管理员权限'\n              });\n              console.log(\"error\");\n            })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      },\n      openForm(index,rows){\n        this.dialogVisible = true;\n        this.idCard='';\n        this.idCard=rows[index].userId;\n        // console.log(this.idCard);\n      },\n      setPosition(){\n        if(this.form.resource==='员工'){\n          // console.log(0)\n          // console.log(this.idCard);\n          axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:this.idCard,position:0}).then(res => {\n            // console.log(res.data);\n          }).catch((error)=>{\n            console.log(\"error\");\n          });\n        }\n        else if(this.form.resource==='经理'){\n          axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:this.idCard,position:1}).then(res => {\n            // console.log(res.data);\n          }).catch((error)=>{\n            console.log(\"error\");\n          });\n        }\n        else if(this.form.resource==='负责人'){\n          axios.post('http://120.79.185.173:8080/agriculture/backend/user/positionUpdate.do',{id:this.idCard,position:2}).then(res => {\n            // console.log(res.data);\n          }).catch((error)=>{\n            console.log(\"error\");\n          });\n        }\n\n        //刷新列表\n        axios.post('http://120.79.185.173:8080/agriculture/backend/user/usersGet.do',{pageNum:10})\n          .then((res) => {\n            this.tableData=[]\n            // console.log(res.data);\n            for(var i=0;i<res.data.data.list.length;i++) {\n              if (res.data.data.list[i].relationships.length > 0) {\n                for (var j = 0; j < res.data.data.list[i].relationships.length; j++) {\n                  var newValue = {\n                    username: res.data.data.list[i].username,\n                    userId: res.data.data.list[i].userId,\n                    type: res.data.data.list[i].type,\n                    姓名: res.data.data.list[i].username,\n                    手机: res.data.data.list[i].phonenum,\n                    企业: res.data.data.list[i].relationships[j].enterpriseName,\n                    角色: res.data.data.list[i].relationships[j].position\n                  }\n                  this.tableData.push(newValue)\n                }\n              }\n            }\n          })\n          .catch((error) =>{\n            console.log(\"error\");\n          })\n        //关闭窗口\n        this.dialogVisible = false\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/person/roleManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-button',{on:{\"click\":_vm.openSel}},[_vm._v(\"批量分配\")])],1),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.tableData,\"header-cell-style\":{background:'#1ca291',color:'#ffffff'},\"border\":\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.selsChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_vm._l((_vm.tableHeader),function(item){return _c('el-table-column',{key:item.id,attrs:{\"prop\":item,\"label\":item}})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.deleteAlert(scope.$index, _vm.tableData)}}},[_vm._v(\"\\n          移除\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.openForm(scope.$index, _vm.tableData)}}},[_vm._v(\"分配角色\")])]}}])})],2),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-radio-group',{model:{value:(_vm.form.resource),callback:function ($$v) {_vm.$set(_vm.form, \"resource\", $$v)},expression:\"form.resource\"}},[_c('el-radio',{attrs:{\"label\":\"员工\",\"prop\":\"0\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"经理\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"负责人\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.setPosition}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.dialogVisible1,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible1=$event}}},[_c('el-form',{ref:\"form1\",attrs:{\"model\":_vm.form1,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-radio-group',{model:{value:(_vm.form1.resource),callback:function ($$v) {_vm.$set(_vm.form1, \"resource\", $$v)},expression:\"form1.resource\"}},[_c('el-radio',{attrs:{\"label\":\"员工\",\"prop\":\"0\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"经理\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"负责人\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible1 = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.setAll}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b231916e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/person/roleManage.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b231916e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/person/roleManage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}